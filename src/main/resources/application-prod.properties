# Configurações de produção
# Configure as credenciais do PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5432/finnza_db
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Connection Pool (otimizado para produção)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# JPA/Hibernate
# Use 'update' para criar/atualizar tabelas automaticamente no primeiro deploy
# Depois pode mudar para 'validate' por segurança
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Batch Processing (otimização para operações em massa)
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Desabilitar open-in-view para melhor performance
spring.jpa.open-in-view=false

# JWT Configuration (use variáveis de ambiente em produção)
jwt.secret=${JWT_SECRET:mySecretKeyForFinnzaFinancialSystem2024SecureAndLongKeyForJWTTokenGeneration}
jwt.expiration=86400000

# Logging (produção - apenas erros e warnings)
logging.level.root=WARN
logging.level.com.finnza=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Actuator (apenas health em produção)
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=never

# Asaas Configuration (use variáveis de ambiente no Render)
asaas.api.key=${ASAAS_API_KEY:}
asaas.api.url=${ASAAS_API_URL:https://sandbox.asaas.com/api/v3}
asaas.mock.enabled=${ASAAS_MOCK_ENABLED:false}
# Importação automática de contratos na inicialização (padrão: true)
asaas.importacao.automatica.enabled=${ASAAS_IMPORTACAO_AUTOMATICA_ENABLED:true}

# Omie Configuration (use variáveis de ambiente em produção)
omie.app.key=${OMIE_APP_KEY:}
omie.app.secret=${OMIE_APP_SECRET:}
omie.api.url=${OMIE_API_URL:https://app.omie.com.br/api/v1}
omie.mock.enabled=${OMIE_MOCK_ENABLED:false}
